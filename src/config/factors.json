{
  "version": "1.0.5",
  "ui": {
    "groups": [
      { "id": "basics" },
      { "id": "pages_content" },
      { "id": "platform" },
      { "id": "experience" },
      { "id": "quality" },
      { "id": "ops" }
    ]
  },
  "globalOverheads": {
    "pmPercentOfBuild": 0.12,
    "qaPercentOfBuild": 0.08,
    "contingencyRiskBands": { "low": 0.05, "medium": 0.12, "high": 0.22 },
    "maintenance": { "warrantyWeeks": 4, "retainerMonthlyPercent": 0.08 }
  },
  "levers": [
    {
      "id": "project_type",
      "group": "basics",
      "type": "select",
      "options": [
        { "value": "brochure" },
        { "value": "ecommerce" },
        { "value": "webapp" }
      ],
      "default": "brochure"
    },
    {
      "id": "design_source",
      "group": "experience",
      "type": "select",
      "options": [
        { "value": "template_existing", "hours.design": 4, "hours.frontend": 4, "multiplier.design": 0.6, "multiplier.frontend": 0.5 },
        { "value": "provided_figma", "hours.design": 8, "hours.frontend": 10, "multiplier.design": 0.9, "multiplier.frontend": 1.0 },
        { "value": "from_scratch", "hours.design": 36, "hours.frontend": 12, "multiplier.design": 1.3, "multiplier.frontend": 1.1 },
        { "value": "other" }
      ],
      "default": "template_existing"
    },
    {
      "id": "brand_design",
      "group": "experience",
      "type": "select",
      "options": [
        { "value": "none", "hours.design": 0 },
        { "value": "light", "hours.design": 14 },
        { "value": "full", "hours.design": 50 },
        { "value": "other" }
      ],
      "default": "light"
    },
    {
      "id": "pages_unique",
      "group": "pages_content",
      "type": "number",
      "min": 1,
      "max": 50,
      "default": 5,
      "hoursPerUnit": { "design": 2.5, "frontend": 3.5, "qa": 0.7 }
    },
    {
      "id": "pages_reused_count",
      "group": "pages_content",
      "type": "number",
      "min": 0,
      "max": 2000,
      "default": 10,
      "hoursPerBatch": { "batchSize": 10, "content": 2, "qa": 0.5 }
    },
    {
      "id": "content_state",
      "group": "pages_content",
      "type": "select",
      "options": [
        { "value": "ready", "multiplier.content": 0.6 },
        { "value": "partial", "multiplier.content": 1 },
        { "value": "copy_needed", "hours.content": 24 },
        { "value": "other" }
      ],
      "default": "partial"
    },
    {
      "id": "i18n_locales",
      "group": "pages_content",
      "type": "number",
      "min": 1,
      "max": 12,
      "default": 1,
      "hoursBase": { "frontend": 0, "backend": 0 },
      "hoursPerExtraLocale": { "frontend": 2, "backend": 2, "content": 4, "qa": 1.5 }
    },
    {
      "id": "cms_choice",
      "group": "platform",
      "type": "select",
      "options": [
        { "value": "none", "multiplier.backend": 0.9 },
        { "value": "wordpress", "hours.backend": 8, "hours.frontend": 6, "multiplier.frontend": 0.7 },
        { "value": "webflow", "hours.frontend": 12, "hours.backend": 3, "multiplier.frontend": 0.6 },
        { "value": "wix", "hours.frontend": 10, "hours.backend": 2, "multiplier.frontend": 0.6 },
        { "value": "squarespace", "hours.frontend": 10, "hours.backend": 2, "multiplier.frontend": 0.6 },
        { "value": "sanity", "hours.backend": 24 },
        { "value": "shopify", "hours.backend": 26, "hours.frontend": 6 },
        { "value": "other" }
      ],
      "default": "wordpress"
    },
    {
      "id": "wp_page_builder",
      "group": "platform",
      "type": "select",
      "visibleWhen": [{ "id": "cms_choice", "equals": "wordpress" }],
      "options": [
        { "value": "gutenberg", "hours.frontend": 4 },
        { "value": "elementor", "hours.frontend": 8, "hours.qa": 2 },
        { "value": "divi", "hours.frontend": 8, "hours.qa": 2 },
        { "value": "other" }
      ],
      "default": "gutenberg"
    },
    {
      "id": "ecom_depth",
      "group": "platform",
      "type": "select",
      "visibleWhen": [{ "id": "project_type", "equals": "ecommerce" }],
      "options": [
        { "value": "lite", "hours.backend": 18, "hours.frontend": 14 },
        { "value": "standard", "hours.backend": 55, "hours.frontend": 40 },
        { "value": "advanced", "hours.backend": 95, "hours.frontend": 70 }
      ],
      "default": "standard"
    },
    {
      "id": "sku_count",
      "group": "platform",
      "type": "number",
      "min": 0,
      "max": 20000,
      "default": 100,
      "visibleWhen": [{ "id": "project_type", "equals": "ecommerce" }],
      "hoursPerBatch": { "batchSize": 50, "content": 3, "qa": 1 }
    },
    {
      "id": "auth",
      "group": "platform",
      "type": "select",
      "options": [
        { "value": "none", "hours.backend": 0, "hours.frontend": 0 },
        { "value": "email", "hours.backend": 14, "hours.frontend": 10 },
        { "value": "oauth", "hours.backend": 22, "hours.frontend": 12 },
        { "value": "other" }
      ],
      "default": "none"
    },
    {
      "id": "integrations",
      "group": "platform",
      "type": "multiselect",
      "options": [
        { "value": "analytics", "hours.backend": 3, "hours.frontend": 4 },
        { "value": "crm", "hours.backend": 12, "hours.frontend": 4 },
        { "value": "emailing", "hours.backend": 6, "hours.frontend": 3 },
        { "value": "payments", "hours.backend": 10, "hours.frontend": 6 },
        { "value": "search", "hours.backend": 10, "hours.frontend": 6 },
        { "value": "pim", "hours.backend": 24, "hours.frontend": 6 },
        { "value": "other" }
      ]
    },
    {
      "id": "social_media",
      "group": "experience",
      "type": "multiselect",
      "options": [
        { "value": "share", "hours.frontend": 2 },
        { "value": "embeds", "hours.frontend": 4, "hours.qa": 1 },
        { "value": "feeds", "hours.frontend": 8, "hours.backend": 6, "hours.qa": 2 },
        { "value": "other" }
      ]
    },
    {
      "id": "performance_target",
      "group": "quality",
      "type": "select",
      "options": [
        { "value": "basic", "multiplier.frontend": 1, "multiplier.devops": 1 },
        { "value": "good", "multiplier.frontend": 1.15, "hours.devops": 6 },
        { "value": "excellent", "multiplier.frontend": 1.35, "hours.devops": 12 }
      ],
      "default": "good"
    },
    {
      "id": "accessibility",
      "group": "quality",
      "type": "select",
      "options": [
        { "value": "none", "hours.qa": 0, "hours.frontend": 0 },
        { "value": "aa_partial", "hours.qa": 10, "hours.frontend": 10 },
        { "value": "aa_full", "hours.qa": 28, "hours.frontend": 24 },
        { "value": "aaa", "hours.qa": 36, "hours.frontend": 30 }
      ],
      "default": "aa_partial"
    },
    {
      "id": "animations",
      "group": "experience",
      "type": "select",
      "options": [
        { "value": "minimal", "hours.frontend": 4 },
        { "value": "moderate", "hours.frontend": 16 },
        { "value": "complex", "hours.frontend": 36 }
      ],
      "default": "moderate"
    },
    {
      "id": "seo_package",
      "group": "experience",
      "type": "select",
      "options": [
        { "value": "basic_meta", "hours.seo": 2 },
        { "value": "tech_onpage", "hours.seo": 10 },
        { "value": "tech_keyword", "hours.seo": 28 },
        { "value": "full", "hours.seo": 48 },
        { "value": "other" }
      ],
      "default": "tech_onpage"
    },
    {
      "id": "security_hardening",
      "group": "quality",
      "type": "select",
      "options": [
        { "value": "minimal", "hours.devops": 2 },
        { "value": "standard", "hours.devops": 6 },
        { "value": "enhanced", "hours.devops": 16 }
      ],
      "default": "standard"
    },
    {
      "id": "hosting_stack",
      "group": "platform",
      "type": "select",
      "options": [
        { "value": "managed_wp", "hours.devops": 2 },
        { "value": "vercel_static", "hours.devops": 6 },
        { "value": "node_server", "hours.devops": 14 },
        { "value": "kubernetes", "hours.devops": 28 },
        { "value": "other" }
      ],
      "default": "vercel_static"
    },
    {
      "id": "migration",
      "group": "pages_content",
      "type": "select",
      "options": [
        { "value": "none", "hours.content": 0 },
        { "value": "semi_auto", "hours.content": 16, "hours.backend": 8 },
        { "value": "manual", "hours.content": 32 },
        { "value": "other" }
      ],
      "default": "none"
    },
    {
      "id": "testing_scope",
      "group": "quality",
      "type": "multiselect",
      "options": [
        { "value": "browsers", "hours.qa": 10 },
        { "value": "devices", "hours.qa": 8 },
        { "value": "automation", "hours.qa": 18, "hours.devops": 6 },
        { "value": "other" }
      ]
    },
    {
      "id": "handover_docs",
      "group": "ops",
      "type": "select",
      "options": [
        { "value": "readme", "hours.pm": 3 },
        { "value": "playbook", "hours.pm": 16 },
        { "value": "other" }
      ],
      "default": "readme"
    },
    {
      "id": "risk_level",
      "group": "ops",
      "type": "select",
      "options": [
        { "value": "low" },
        { "value": "medium" },
        { "value": "high" }
      ],
      "default": "medium"
    },
    {
      "id": "timeline_pressure",
      "group": "ops",
      "type": "select",
      "options": [
        { "value": "normal" },
        { "value": "rush10", "multiplier.all": 1.1 },
        { "value": "rush20", "multiplier.all": 1.2 }
      ],
      "default": "normal"
    }
  ],
  "dependencies": [
    { "if": { "id": "cms_choice", "equals": "none" }, "then": { "adjust": [{ "id": "migration", "set": "none" }] } },
    { "if": { "id": "cms_choice", "equals": "wordpress" }, "then": { "show": ["wp_page_builder"] } },
    { "if": { "id": "cms_choice", "equals": "webflow" }, "then": { "hide": ["hosting_stack", "wp_page_builder"] } },
    { "if": { "id": "cms_choice", "equals": "wix" }, "then": { "hide": ["hosting_stack", "wp_page_builder"] } },
    { "if": { "id": "cms_choice", "equals": "squarespace" }, "then": { "hide": ["hosting_stack", "wp_page_builder"] } },
    { "if": { "id": "cms_choice", "equals": "shopify" }, "then": { "hide": ["wp_page_builder"] } }
  ],
  "presets": [
    {
      "id": "offerte_simple_website",
      "meta": { "order": 0, "targetP50Range": [1000, 1000] },
      "values": {
        "project_type": "brochure",
        "design_source": "template_existing",
        "brand_design": "none",
        "pages_unique": 2,
        "pages_reused_count": 4,
        "cms_choice": "wordpress",
        "wp_page_builder": "gutenberg",
        "i18n_locales": 1,
        "integrations": [],
        "social_media": [],
        "performance_target": "basic",
        "accessibility": "none",
        "animations": "minimal",
        "content_state": "partial",
        "seo_package": "basic_meta",
        "security_hardening": "minimal",
        "hosting_stack": "managed_wp",
        "migration": "none",
        "testing_scope": [],
        "handover_docs": "readme",
        "risk_level": "low",
        "timeline_pressure": "normal"
      }
    },
    {
      "id": "preset_good",
      "meta": { "order": 1, "targetP50Range": [1000, 2000] },
      "values": {
        "project_type": "brochure",
        "design_source": "template_existing",
        "brand_design": "light",
        "pages_unique": 4,
        "pages_reused_count": 10,
        "cms_choice": "wordpress",
        "wp_page_builder": "gutenberg",
        "i18n_locales": 1,
        "integrations": ["analytics"],
        "social_media": ["share"],
        "performance_target": "good",
        "accessibility": "aa_partial",
        "animations": "minimal",
        "content_state": "partial",
        "seo_package": "tech_onpage",
        "security_hardening": "standard",
        "hosting_stack": "managed_wp",
        "migration": "none",
        "testing_scope": ["devices"],
        "handover_docs": "readme",
        "risk_level": "medium",
        "timeline_pressure": "normal"
      }
    },
    {
      "id": "preset_professional",
      "meta": { "order": 2, "targetP50Range": [2000, 5000] },
      "values": {
        "project_type": "brochure",
        "design_source": "provided_figma",
        "brand_design": "light",
        "pages_unique": 8,
        "pages_reused_count": 20,
        "cms_choice": "wordpress",
        "wp_page_builder": "elementor",
        "i18n_locales": 1,
        "integrations": ["analytics", "emailing"],
        "social_media": ["share", "embeds"],
        "performance_target": "good",
        "accessibility": "aa_partial",
        "animations": "moderate",
        "content_state": "partial",
        "seo_package": "tech_keyword",
        "security_hardening": "standard",
        "hosting_stack": "vercel_static",
        "migration": "semi_auto",
        "testing_scope": ["browsers", "devices"],
        "handover_docs": "readme",
        "risk_level": "medium",
        "timeline_pressure": "normal"
      }
    },
    {
      "id": "preset_custom",
      "meta": { "order": 3, "targetP50Range": [10000, 50000] },
      "values": {
        "project_type": "brochure",
        "design_source": "from_scratch",
        "brand_design": "full",
        "pages_unique": 14,
        "pages_reused_count": 40,
        "cms_choice": "sanity",
        "i18n_locales": 3,
        "integrations": ["analytics", "emailing", "search", "crm"],
        "social_media": ["share", "embeds", "feeds"],
        "performance_target": "excellent",
        "accessibility": "aa_full",
        "animations": "complex",
        "content_state": "copy_needed",
        "seo_package": "full",
        "security_hardening": "enhanced",
        "hosting_stack": "node_server",
        "migration": "manual",
        "testing_scope": ["browsers", "devices", "automation"],
        "handover_docs": "playbook",
        "risk_level": "high",
        "timeline_pressure": "rush10"
      }
    }
  ],
  "outputConfig": {
    "showBands": ["P50", "P80"],
    "rounding": { "currency": 0, "hours": 1 },
    "includeAssumptions": true,
    "includeExclusions": true
  }
}
